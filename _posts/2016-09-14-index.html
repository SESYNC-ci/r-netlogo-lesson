<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Bas(e)ic R</title>
  <meta name="description" content="">

  
  <link rel="stylesheet" href="https://cdn.rawgit.com/sesync-ci/lesson-stylesheets/1.0.1/css/lesson.css">
  
  
</head>


  <body>

    <div class="page-content">
      <div class="wrapper">
        
<p><a name="/slides/title"></a></p>

<h1 style="text-transform: none;" id="baseic-r">Bas(e)ic R</h1>

<p>Lesson 2 with <em>Kate Weiss</em></p>

<p class="ToS"><a href="#/slides/title">Top of Section</a></p>

<hr />

<p><a name="/slides/intro"></a></p>

<h2 id="why-r">Why R?</h2>

<ul>
  <li>High-level programming language good for interactive statistical analysis.</li>
  <li>General purpose programming language for scripting entire data-processing workflows.</li>
  <li>Large selection of “add-on” packages that extend the capabilities of “base R”.</li>
  <li>Large user community especially within statistics and ecology.</li>
  <li>Open source.</li>
</ul>

<p class="ToS"><a href="#/slides/intro">Top of Section</a></p>

<hr />

<p><a name="/slides/console"></a></p>

<h2 id="the-console">The Console</h2>

<p>The interpreter accepts R commands interactively through the console. Basic math, as you would type it on a calculator, is usually a valid command in the R language:</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="m">1</span> <span class="o">+</span> <span class="m">2</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] 3
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="m">5</span><span class="o">/</span><span class="m">3</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] 1.666667
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="m">4</span><span class="o">^</span><span class="m">2</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] 16
</code></pre>
</div>

<!--split-->

<dl>
  <dt>Question</dt>
  <dd>Why is the output prefixed by <code class="highlighter-rouge">[1]</code>?</dd>
  <dt>Answer</dt>
  <dd class="fragment">That’s the index, or position in a vector, of the first result.</dd>
</dl>

<!--split-->

<p>A command giving a vector of results shows this clearly:</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">100</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
 [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
 [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
 [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
 [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
 [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100
</code></pre>
</div>

<p>Rather than basic math, we used a <strong>function</strong> called <code class="highlighter-rouge">seq()</code> in this command.
Most of “learning R” involves getting to know a whole lot of functions, what are their arguments (a.k.a. inputs) and what do they return (a.k.a. output).</p>

<!--split-->

<p>One thing you’ll regularly want to do is store output of a function to a variable.
Using the symbol <code class="highlighter-rouge">&lt;-</code> is referred to as assignment: we assign to a <strong>variable</strong> on the left of the <code class="highlighter-rouge">&lt;-</code> symbol the output of what is on its right.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">x</span> <span class="o">&lt;-</span> <span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">100</span><span class="p">)</span>
</code></pre>
</div>

<p>You’ll notice that nothing prints to the console, because we assigned the output to a variable.
We can print <code class="highlighter-rouge">x</code> by evaluating it by itself.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">x</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
 [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
 [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
 [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
 [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
 [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100
</code></pre>
</div>

<!--split-->

<p>Commands must always reference things known to the interpreter.
When you start a R session, there are many things already known, including</p>

<ul>
  <li>any number</li>
  <li>any string of characters</li>
  <li>functions in <code class="highlighter-rouge">base R</code></li>
</ul>

<!--split-->

<p>To reference a number or function you just type it in as above, but to referece a string of alpha-numeric characters you must surround them in quotation marks.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="s1">'ab#45'</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "ab#45"
</code></pre>
</div>

<dl>
  <dt>Question</dt>
  <dd>Is it better to use <code class="highlighter-rouge">'</code> or <code class="highlighter-rouge">"</code>?</dd>
  <dt>Answer</dt>
  <dd class="fragment">There is no answer! You will often encounter stylistic choices like this, so if you don’t have a personal preference try to mimic existing styles.</dd>
</dl>

<!--split-->

<p>Without quotes, the interpreter checks for things named <code class="highlighter-rouge">abc45.q</code> and doesn’t find anything:</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">ab</span><span class="c1">#45
</span></code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>Error in eval(expr, envir, enclos): object 'ab' not found
</code></pre>
</div>

<!--split-->

<p>Anything you assign to a variable becomes known to R, so you can reference it in any command.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">y</span> <span class="o">&lt;-</span> <span class="s1">'ab#45'</span>
<span class="n">typeof</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "character"
</code></pre>
</div>

<p class="ToS"><a href="#/slides/console">Top of Section</a></p>

<hr />

<p><a name="/slides/editor"></a></p>

<h2 id="the-editor">The Editor</h2>

<p>The <strong>console</strong> is for evaluating commands you don’t intend to keep or reuse. It’s useful for testing commands and poking around.</p>

<p>The <strong>editor</strong> is where you compose scripts that will process data, perform analyses, code up visualizations, and even write reports.</p>

<p>These work together in RStudio, which has multiple ways to send parts of the script you are editing to the console for immediate evaluation. Alternatively you can “source” the entire script.</p>

<!--split-->

<p>Open up “lesson-2.R” in the editor, and follow along by replacing the <code class="highlighter-rouge">...</code> placeholders with the code here. Then evalute just this line (Ctrl R on Windows, ⌘ R on Mac OS).</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">vals</span> <span class="o">&lt;-</span> <span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">100</span><span class="p">)</span>
</code></pre>
</div>

<!--split-->

<p>The elements of this statement, from right to left are:</p>

<ul>
  <li><code class="highlighter-rouge">)</code> is the closing paren of a function call</li>
  <li><code class="highlighter-rouge">1</code> and <code class="highlighter-rouge">100</code> are both arguments, or parameters, to the function</li>
  <li><code class="highlighter-rouge">(</code> is the opening paren of the function call</li>
  <li><code class="highlighter-rouge">seq</code> is the name of the function</li>
  <li><code class="highlighter-rouge"> &lt;- </code> is an operator that assigns what’s named on the left to equal the result of the expression on the right</li>
  <li><code class="highlighter-rouge">vals</code> is the name of a variable</li>
</ul>

<!--split-->

<dl>
  <dt>Question</dt>
  <dd>Why call <code class="highlighter-rouge">vals</code> a “variable” and <code class="highlighter-rouge">seq</code> a “function”?</dd>
  <dt>Answer</dt>
  <dd class="fragment">It is true they are both names of objects known to R, and could be called variables. But <code class="highlighter-rouge">seq</code> has the important distinguishing feature of being <strong>callable</strong>, which is indicated in documentation by writing the function name with empty parens, as in <code class="highlighter-rouge">seq()</code>.</dd>
</dl>

<!--split-->

<p>Our call to the function <code class="highlighter-rouge">seq</code> could have been much more explicit. We could give the arguments by the names that <code class="highlighter-rouge">seq</code> is expecting.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">vals</span> <span class="o">&lt;-</span> <span class="n">seq</span><span class="p">(</span><span class="n">from</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
            <span class="n">to</span> <span class="o">=</span> <span class="m">100</span><span class="p">)</span>
</code></pre>
</div>

<p>Run this code either line-by-line, or highlight the section to run (optionally with keyboard shortcut Ctrl-Return or ⌘ Return).</p>

<!--split-->

<dl>
  <dt>Question</dt>
  <dd>What’s an advantage of naming arguments?</dd>
  <dt>Answer</dt>
  <dd class="fragment">One advantage is that you can put them in any order. A related advantage is that you can then skip some arguments, which is fine to do if each skipped argument has a default value.</dd>
</dl>

<!--split-->

<p>How would you get to know the names of a function’s arguments?</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="o">?</span><span class="n">seq</span>
</code></pre>
</div>

<p>How would you even know what function to call?</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="o">??</span><span class="n">sequence</span>
</code></pre>
</div>

<!--split-->

<p>Going the other direction, a shorthand form of the <code class="highlighter-rouge">seq()</code> function is:</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="m">1</span><span class="o">:</span><span class="m">100</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
 [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
 [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
 [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
 [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
 [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100
</code></pre>
</div>

<p>This shorthand is most commonly used while accessing parts of objects, as we’ll see below.</p>

<!--split-->

<h2 id="save-your-work">Save your work</h2>

<p>Do save the “lesson-2.R” file.</p>

<p>But I mean <em>really</em> save your work, by commiting it to your project and syncing up to a GitHub repository.</p>

<ol>
  <li>Go to the <code class="highlighter-rouge">git</code> tab in RStudio</li>
  <li>Select <code class="highlighter-rouge">commit</code> to open the “Review Changes” window</li>
  <li>Select the file(s) you want to commit.</li>
  <li>Enter a descriptive message about the commit.</li>
  <li>Commit!</li>
  <li>Push!</li>
</ol>

<p class="ToS"><a href="#/slides/editor">Top of Section</a></p>

<hr />

<p><a name="/slides/types"></a></p>

<h2 id="data-types-and-structures">Data types and structures</h2>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>integer</td>
      <td>-4, 0, 999</td>
    </tr>
    <tr>
      <td>double</td>
      <td>3.1, -4, Inf, NaN</td>
    </tr>
    <tr>
      <td>character</td>
      <td>“a”, “4”, “👏”</td>
    </tr>
    <tr>
      <td>logical</td>
      <td>TRUE, FALSE</td>
    </tr>
    <tr>
      <td>missing</td>
      <td>NA</td>
    </tr>
  </tbody>
</table>

<p>Data structures, or more generally “objects”, are built from one or more of these data types and other objects.</p>

<!--split-->

<h2 id="vectors">Vectors</h2>

<p>Vectors are the basic data structure in R. They are a collection of data that are all of the same type. Create a vector by combining elements together using the function <code class="highlighter-rouge">c()</code>. Use the operator <code class="highlighter-rouge">:</code> for a sequence of numbers (forwards or backwards), otherwise separate elements with commas.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">counts</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
</code></pre>
</div>

<p>All elements of an vector must be the same type, so when you attempt to combine different types they will be coerced to the most flexible type.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "1" "2" "c"
</code></pre>
</div>

<!--split-->

<h2 id="lists">Lists</h2>

<p>Lists are like vectors but their elements can be of any data type or structure, including another list! You construct lists by using <code class="highlighter-rouge">list()</code> instead of <code class="highlighter-rouge">c()</code>.</p>

<p>Compare the results of <code class="highlighter-rouge">list()</code> and <code class="highlighter-rouge">c()</code></p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">x</span> <span class="o">&lt;-</span> <span class="n">list</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span> <span class="n">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">))</span>
<span class="n">y</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span> <span class="n">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">))</span>
</code></pre>
</div>

<dl>
  <dt>Question</dt>
  <dd>What’s different about the structure of the variables <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code>? Use the function <code class="highlighter-rouge">str()</code> to investigate.</dd>
  <dt>Answer</dt>
  <dd class="fragment">The list contains two elements, a list and a vector. The vector <code class="highlighter-rouge">y</code> flattened the elements to a single element of the most flexible data type.</dd>
</dl>

<!--split-->

<h2 id="factors">Factors</h2>

<p>A factor is a vector that can contain only predefined values, and is used to store categorical data. Factors are built on top of integer vectors using two attributes: the class(), “factor”, which makes them behave differently from regular integer vectors, and the levels(), which defines the set of allowed values.</p>

<!--split-->

<p>Use <code class="highlighter-rouge">factor()</code> to create a vector with factors, or <code class="highlighter-rouge">as.factor()</code> to convert an existing vector to factors.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">education</span> <span class="o">&lt;-</span> <span class="n">factor</span><span class="p">(</span>
    <span class="n">c</span><span class="p">(</span><span class="s2">"college"</span><span class="p">,</span> <span class="s2">"highschool"</span><span class="p">,</span> <span class="s2">"college"</span><span class="p">,</span> <span class="s2">"middle"</span><span class="p">),</span>
    <span class="n">levels</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">"middle"</span><span class="p">,</span> <span class="s2">"highschool"</span><span class="p">,</span> <span class="s2">"college"</span><span class="p">),</span>
    <span class="n">ordered</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">education</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code> Ord.factor w/ 3 levels "middle"&lt;"highschool"&lt;..: 3 2 3 1
</code></pre>
</div>

<p class="ToS"><a href="#/slides/types">Top of Section</a></p>

<hr />

<p><a name="/slides/dataframes"></a></p>

<h2 id="multi-dimensional-data-structures">Multi-dimensional data structures</h2>

<p>Data can be stored in several types of data structures depending on its complexity.</p>

<table>
  <thead>
    <tr>
      <th>Dimensions</th>
      <th>Homogeneous</th>
      <th>Heterogeneous</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1d*</td>
      <td>c()</td>
      <td>list()</td>
    </tr>
    <tr>
      <td>2d</td>
      <td>matrix()</td>
      <td>data.frame()</td>
    </tr>
    <tr>
      <td>nd</td>
      <td>array()</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Of these, the data frame is far and away the most used.</p>

<!--split-->

<h2 id="data-frames">Data frames</h2>

<p>Data frames are 2-dimensional and can contain heterogenous data like numbers in one column and a factor in another.</p>

<p>It is the data structure most similar to a spreadsheet, with two key differences:</p>

<ul>
  <li>Data frames are collections of <em>equal-length</em> vectors.</li>
  <li>As vectors, the columns are homogeneous and cannot hold values of the <em>wrong</em> type.</li>
</ul>

<!--split-->

<p>Creating a data frame from scratch can be done by combining vectors with the <code class="highlighter-rouge">data.frame()</code> function.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">df</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span><span class="n">education</span><span class="p">,</span> <span class="n">counts</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">df</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>   education counts
1    college      4
2 highschool      3
3    college      7
4     middle      5
</code></pre>
</div>

<!--split-->

<p>Some functions to get to know your data frame are:</p>

<table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">dim()</code></td>
      <td>dimensions</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">nrow()</code></td>
      <td>number of rows</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ncol()</code></td>
      <td>number of columns</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">names()</code></td>
      <td>(column) names</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">str()</code></td>
      <td>structure</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">summary()</code></td>
      <td>summary info</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">head()</code></td>
      <td>shows beginning rows</td>
    </tr>
  </tbody>
</table>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">names</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "education" "counts"   
</code></pre>
</div>

<!--split-->

<h2 id="exercise-1">Exercise 1</h2>

<p>Create a data frame with two columns, one called “species” and another called “count” into a data frame. Store your data frame as a variable called <code class="highlighter-rouge">data</code>. You can do this with or without populating the data frame with values.</p>

<p class="ToS"><a href="#/slides/dataframes">Top of Section</a></p>

<hr />

<p><a name="/slides/parts"></a></p>

<h2 id="parts-of-an-object">Parts of an Object</h2>

<p>Parts of objects are always accessible, either by their name or by their position, using square brackets: <code class="highlighter-rouge">[</code> and <code class="highlighter-rouge">]</code>.</p>

<h2 id="position">Position</h2>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">counts</span><span class="p">[</span><span class="m">1</span><span class="p">]</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] 4
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">counts</span><span class="p">[</span><span class="m">3</span><span class="p">]</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] 7
</code></pre>
</div>

<!--split-->

<h2 id="names">Names</h2>

<p>Parts of an object can usually also have a name. The names can be given when you are creating a vector or afterwards using the <code class="highlighter-rouge">names()</code> function.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s1">'education'</span><span class="p">]</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>   education
1    college
2 highschool
3    college
4     middle
</code></pre>
</div>

<!--split-->

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">names</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s2">"ed"</span><span class="p">,</span> <span class="s2">"ct"</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s1">'ed'</span><span class="p">]</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>          ed
1    college
2 highschool
3    college
4     middle
</code></pre>
</div>

<dl>
  <dt>Question</dt>
  <dd>This use of <code class="highlighter-rouge">&lt;-</code> with <code class="highlighter-rouge">names(x)</code> on the left is a little odd. What’s going on?</dd>
  <dt>Answer</dt>
  <dd class="fragment">We are overwriting an existing variable, but one that is accessed through the output of the function on the left rather than the global environment.</dd>
</dl>

<!--split-->

<p>In a multi-dimensional array, you separate the dimension along which a part is requested with a comma.</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="m">3</span><span class="p">,</span> <span class="s2">"ed"</span><span class="p">]</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] college
Levels: middle &lt; highschool &lt; college
</code></pre>
</div>

<p>It’s fine to mix names and indices when selecting parts of an object.</p>

<!--split-->

<h2 id="subsetting-ranges">Subsetting ranges</h2>

<p>There are multiple ways to simultaneously extract multiple parts of an object.</p>

<table>
  <thead>
    <tr>
      <th>Use in brackets</th>
      <th>Subset instructions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>positive integers</td>
      <td>elements at the specified positions</td>
    </tr>
    <tr>
      <td>negative integers</td>
      <td>omit elements at the specified positions</td>
    </tr>
    <tr>
      <td>logical vectors</td>
      <td>select elements where the corresponding value is TRUE</td>
    </tr>
    <tr>
      <td>nothing</td>
      <td>return the original vector (all)</td>
    </tr>
  </tbody>
</table>

<!--split-->

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">days</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s2">"Sunday"</span><span class="p">,</span> <span class="s2">"Monday"</span><span class="p">,</span> <span class="s2">"Tuesday"</span><span class="p">,</span> <span class="s2">"Wednesday"</span><span class="p">,</span> <span class="s2">"Thursday"</span><span class="p">,</span> <span class="s2">"Friday"</span><span class="p">,</span> <span class="s2">"Saturday"</span><span class="p">)</span>
<span class="n">weekdays</span> <span class="o">&lt;-</span> <span class="n">days</span><span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">6</span><span class="p">]</span>
<span class="n">weekend</span> <span class="o">&lt;-</span> <span class="n">days</span><span class="p">[</span><span class="n">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">7</span><span class="p">)]</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">weekdays</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Friday"   
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">weekend</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "Sunday"   "Saturday"
</code></pre>
</div>

<!--split-->

<h2 id="exercise-2">Exercise 2</h2>

<p>Get weekdays using negative integers. Get M-W-F using a call to <code class="highlighter-rouge">seq()</code> to specify the position (don’t forget to <code class="highlighter-rouge">?seq</code>).</p>

<p class="ToS"><a href="#/slides/parts">Top of Section</a></p>

<hr />

<p><a name="/slides/functions"></a></p>

<h2 id="creating-functions">Creating functions</h2>

<p>Writing functions to use multiple times within a project can prevent you from duplicating code. If you see blocks of similar lines of code through your project, those are usually candidates for being moved into functions.</p>

<!--split-->

<h2 id="anatomy-of-a-function">Anatomy of a function</h2>

<p>Writing functions is also a great way to understand the terminology and workings of R. Like all programming languages, R has keywords that are reserved for import activities, like creating functions. Keywords are usually very intuitive, the one we need is <code class="highlighter-rouge">function</code>.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="k">function</span><span class="p">(</span><span class="k">...</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">...</span>
    <span class="k">return</span><span class="p">(</span><span class="k">...</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Three components:</p>

<ul>
  <li><strong>arguments</strong>: control how you can call the function</li>
  <li><strong>body</strong>: the code inside the function</li>
  <li><strong>return value</strong>: controls what output the function gives</li>
</ul>

<!--split-->

<p>We’ll make a function to extract the first row and column of its argument, for which we can choose an arbitrary name:</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">result</span> <span class="o">&lt;-</span> <span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span>
    <span class="k">return</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Note that <code class="highlighter-rouge">x</code> doesn’t exist until we call the function, which gives the recipe for how <code class="highlighter-rouge">x</code> will be handled.</p>

<!--split-->

<p>Finally, we need to give the function a name so we can use it like we used <code class="highlighter-rouge">c()</code> and <code class="highlighter-rouge">seq()</code> above.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">first</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">result</span> <span class="o">&lt;-</span> <span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span>
    <span class="k">return</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">first</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] college
Levels: middle &lt; highschool &lt; college
</code></pre>
</div>

<!--split-->

<dl>
  <dt>Question</dt>
  <dd>Can you explain the result of entering <code class="highlighter-rouge">first(counts)</code> into the console?</dd>
  <dt>Answer</dt>
  <dd class="fragment">The function caused an error, which prompted the interpreter to print a helpful error message. Never ignore an error message.</dd>
</dl>

<!--split-->

<h2 id="exercise-3">Exercise 3</h2>

<p>Subset the data frame by column name and row position to obtain the following output.</p>

<div class="output highlighter-rouge"><pre class="highlight"><code>[1] highschool college
Levels: middle &lt; highschool &lt; college
</code></pre>
</div>

<p class="ToS"><a href="#/slides/functions">Top of Section</a></p>

<hr />

<p><a name="/slides/stats"></a></p>

<h2 id="distributions-and-statistics">Distributions and Statistics</h2>

<p>Since it is designed for statistics, R can easily draw random numbers from statistical distributions and calculate distribution values.</p>

<p>To generate random numbers from a normal distribution, use the function <code class="highlighter-rouge">rnorm()</code></p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">ten_random_values</span> <span class="o">&lt;-</span> <span class="n">rnorm</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</code></pre>
</div>

<!--split-->

<table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Returns</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>rnorm</td>
      <td>Draw random numbers from normal distribution</td>
      <td>Specify <code class="highlighter-rouge">n</code>, <code class="highlighter-rouge">mean</code>, <code class="highlighter-rouge">sd</code></td>
    </tr>
    <tr>
      <td>pnorm</td>
      <td>Estimate probability of a specific number occuring</td>
      <td> </td>
    </tr>
    <tr>
      <td>qnorm</td>
      <td>Cumulative probability that a given number or smaller occurs</td>
      <td>left-tailed by default</td>
    </tr>
    <tr>
      <td>dnorm</td>
      <td>Returns quantile given a cumulative probability</td>
      <td>opposite of pnorm</td>
    </tr>
  </tbody>
</table>

<!--split-->

<p>Statistical distributions and their functions.
See <em>Table 14.1</em> in <strong>R for Everyone</strong> by Jared Lander for a full table.</p>

<table>
  <thead>
    <tr>
      <th>Distribution</th>
      <th>Random Number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Normal</td>
      <td>rnorm</td>
    </tr>
    <tr>
      <td>Binomial</td>
      <td>rbinom</td>
    </tr>
    <tr>
      <td>Poisson</td>
      <td>rpois</td>
    </tr>
    <tr>
      <td>Gamma</td>
      <td>rgamma</td>
    </tr>
    <tr>
      <td>Exponential</td>
      <td>rexp</td>
    </tr>
    <tr>
      <td>Uniform</td>
      <td>runif</td>
    </tr>
    <tr>
      <td>Logistic</td>
      <td>rlogis</td>
    </tr>
  </tbody>
</table>

<!--split-->

<p>R has built in functions for handling many statistical tests.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">x</span> <span class="o">&lt;-</span> <span class="n">rnorm</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">100</span><span class="p">,</span> <span class="n">mean</span> <span class="o">=</span> <span class="m">25</span><span class="p">,</span> <span class="n">sd</span> <span class="o">=</span> <span class="m">7</span><span class="p">)</span>
<span class="n">y</span> <span class="o">&lt;-</span> <span class="n">rbinom</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">100</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="m">50</span><span class="p">,</span> <span class="n">prob</span> <span class="o">=</span> <span class="m">.85</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">t.test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>
	Welch Two Sample t-test

data:  x and y
t = -25.67, df = 129.85, p-value &lt; 2.2e-16
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -19.13697 -16.39828
sample estimates:
mean of x mean of y 
 24.54237  42.31000 
</code></pre>
</div>

<!--split-->

<p>Linear regression with the <code class="highlighter-rouge">lm()</code> function uses a formula notation to specify relationships between variables (e.g. <code class="highlighter-rouge">y ~ x</code>).</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">fit</span> <span class="o">&lt;-</span> <span class="n">lm</span><span class="p">(</span><span class="n">y</span> <span class="o">~</span> <span class="n">x</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">fit</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>
Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.3766 -1.3968  0.3701  1.6185  5.8984 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 42.92549    1.02204  42.000   &lt;2e-16 ***
x           -0.02508    0.04030  -0.622    0.535    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.577 on 98 degrees of freedom
Multiple R-squared:  0.003936,	Adjusted R-squared:  -0.006228 
F-statistic: 0.3873 on 1 and 98 DF,  p-value: 0.5352
</code></pre>
</div>

<!--split-->

<h2 id="exercise-4">Exercise 4</h2>

<p>Create a data frame from scratch that has three columns and 5 rows. In column “size” place a sequence from 1 to 5. For column “year”, create a factor with three levels representing the past three years. In column “prop”, place 5 random samples from a uniform distribution. Show the summary of a linear model following the formula “prop ~ size + year”.</p>

<p class="ToS"><a href="#/slides/stats">Top of Section</a></p>

<hr />

<p><a name="/slides/flow"></a></p>

<h2 id="flow-control">Flow control</h2>

<p>As a general purpose programming language, you can write R scripts to take care of non-computational tasks.</p>

<p>“Flow control” is the generic term for letting variables whose value is determined at run time to dictate how the code evaluates. It’s things like “for loops” and “if/else” statements.</p>

<!--split-->

<h2 id="install-missing-packages">Install missing packages</h2>

<p>The last thing we’ll do before taking a break, is let R check for any packages you’ll need today that aren’t installed. But we’ll learn how to use flow control along the way.</p>

<p>First, aquire the list of any missing packages.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">requirements</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s1">'tidyr'</span><span class="p">,</span>
		  <span class="s1">'dplyr'</span><span class="p">,</span>
		  <span class="s1">'RSQLite'</span><span class="p">,</span>
		  <span class="s1">'sp'</span><span class="p">,</span>
		  <span class="s1">'rgdal'</span><span class="p">,</span>
		  <span class="s1">'rgeos'</span><span class="p">,</span>
		  <span class="s1">'raster'</span><span class="p">,</span>
		  <span class="s1">'shiny'</span><span class="p">,</span>
		  <span class="s1">'leaflet'</span><span class="p">,</span>
		  <span class="s1">'ggplot2'</span><span class="p">)</span>
		  
<span class="n">missing</span> <span class="o">&lt;-</span> <span class="n">setdiff</span><span class="p">(</span><span class="n">requirements</span><span class="p">,</span>
	           <span class="n">rownames</span><span class="p">(</span><span class="n">installed.packages</span><span class="p">()))</span>
</code></pre>
</div>

<!--split-->

<p>Check, from the console, your number of missing packages:</p>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">length</span><span class="p">(</span><span class="n">missing</span><span class="p">)</span> <span class="o">==</span> <span class="m">0</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] TRUE
</code></pre>
</div>

<p>Your result will be <code class="highlighter-rouge">TRUE</code> or <code class="highlighter-rouge">FALSE</code>, depending on whether you installed all the packages already. We can let the script decide what to do with this information.</p>

<!--split-->

<p>The keyword <code class="highlighter-rouge">if</code> is part of the R language’s syntax for flow control. The statement in the body (between <code class="highlighter-rouge"><span class="p">{</span></code> and <code class="highlighter-rouge">}</code>) only evaluates if the argument (between <code class="highlighter-rouge">(</code> and <code class="highlighter-rouge">)</code>) evaluates to TRUE.</p>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">missing</span><span class="p">)</span> <span class="o">!=</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">install.packages</span><span class="p">(</span><span class="n">missing</span><span class="p">,</span> <span class="n">dep</span><span class="o">=</span><span class="n">TRUE</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p class="ToS"><a href="#/slides/flow">Top of Section</a></p>

<hr />

<p><a name="/slides/conclude"></a></p>

<h2 id="reminder-on-important-symbols">Reminder on important symbols</h2>

<table>
  <thead>
    <tr>
      <th>Symbol</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">?</code></td>
      <td>get help</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">c()</code></td>
      <td>combine</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">#</code></td>
      <td>comment</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">:</code></td>
      <td>sequence</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;-</code></td>
      <td>assignment</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">[ ]</code></td>
      <td>selection</td>
    </tr>
  </tbody>
</table>

<p class="ToS"><a href="#/slides/conclude">Top of Section</a></p>

<hr />

<p><a name="/slides/solutions"></a></p>

<h2 id="exercise-solutions">Exercise solutions</h2>

<!--split-->

<h3 id="solution-1">Solution 1</h3>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">species</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">()</span>
<span class="n">count</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">()</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>'data.frame':	0 obs. of  0 variables
</code></pre>
</div>

<aside class="notes">

  <p><a href="#exercise-1">Return</a></p>

</aside>

<!--split-->

<h3 id="solution-2">Solution 2</h3>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">sol2a</span> <span class="o">&lt;-</span> <span class="n">days</span><span class="p">[</span><span class="n">c</span><span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">-7</span><span class="p">)]</span>
<span class="n">sol2b</span> <span class="o">&lt;-</span> <span class="n">days</span><span class="p">[</span><span class="n">seq</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2</span><span class="p">)]</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">sol2a</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Friday"   
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">sol2b</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] "Monday"    "Wednesday" "Friday"   
</code></pre>
</div>

<aside class="notes">

  <p><a href="#exercise-2">Return</a></p>

</aside>

<!--split-->

<h3 id="solution-3">Solution 3</h3>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">sol3</span> <span class="o">&lt;-</span> <span class="n">df</span><span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">,</span> <span class="s1">'ed'</span><span class="p">]</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">sol3</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>[1] highschool college   
Levels: middle &lt; highschool &lt; college
</code></pre>
</div>

<aside class="notes">

  <p><a href="#exercise-3">Return</a></p>

</aside>

<!--split-->

<h3 id="solution-4">Solution 4</h3>

<div class="language-r text-document highlighter-rouge" title="lesson-2.R"><pre class="highlight"><code><span class="n">df</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span>
    <span class="n">size</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">factor</span><span class="p">(</span>
        <span class="n">c</span><span class="p">(</span><span class="m">2014</span><span class="p">,</span> <span class="m">2014</span><span class="p">,</span> <span class="m">2013</span><span class="p">,</span> <span class="m">2015</span><span class="p">,</span> <span class="m">2015</span><span class="p">),</span>
	<span class="n">levels</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">2013</span><span class="p">,</span> <span class="m">2014</span><span class="p">,</span> <span class="m">2015</span><span class="p">),</span>
	<span class="n">ordered</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">),</span>
    <span class="n">prop</span> <span class="o">=</span> <span class="n">runif</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="m">5</span><span class="p">))</span>
<span class="n">fit</span> <span class="o">&lt;-</span> <span class="n">lm</span><span class="p">(</span><span class="n">prop</span> <span class="o">~</span> <span class="n">size</span> <span class="o">+</span> <span class="n">year</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">)</span>
</code></pre>
</div>

<div class="language-r input highlighter-rouge"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">fit</span><span class="p">)</span>
</code></pre>
</div>
<div class="output highlighter-rouge"><pre class="highlight"><code>
Call:
lm(formula = prop ~ size + year, data = df)

Residuals:
      1       2       3       4       5 
-0.0832  0.0832  0.0000  0.0832 -0.0832 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)   0.4460     0.5053   0.883    0.540
size          0.0276     0.1664   0.166    0.895
year.L        0.3974     0.2278   1.744    0.331
year.Q       -0.3197     0.3311  -0.966    0.511

Residual standard error: 0.1664 on 1 degrees of freedom
Multiple R-squared:  0.9171,	Adjusted R-squared:  0.6685 
F-statistic: 3.689 on 3 and 1 DF,  p-value: 0.3614
</code></pre>
</div>

<aside class="notes">

  <p><a href="#exercise-4">Return</a></p>

</aside>

<p class="ToS"><a href="#/slides/solutions">Top of Section</a></p>

<hr />


      </div>
    </div>

  </body>

</html>
